# Bestdori 文本转换器 - 详细功能测试清单

## 📋 测试环境准备

- [ ] 浏览器：Chrome/Edge/Firefox 最新版本
- [ ] 清除浏览器缓存
- [ ] 打开开发者工具控制台（F12）
- [ ] 检查控制台无报错信息

---

## 🎯 核心功能测试

### 1. 文本输入与解析

#### 1.1 基础文本解析
- [ ] 输入纯文本，验证解析为旁白
- [ ] 输入 `角色名：对话内容` 格式，验证正确识别角色和对话
- [ ] 输入 `「对话内容」` 格式，验证识别为对话
- [ ] 输入 `【括号内容】` 格式，验证特殊格式处理
- [ ] 输入带有自定义分隔符的对话，验证解析

#### 1.2 多行文本处理
- [ ] 输入多行对话，验证每行独立解析
- [ ] 输入空行，验证正确跳过
- [ ] 输入连续多个角色对话，验证顺序正确
- [ ] 混合旁白和对话，验证交替显示正确

#### 1.3 特殊字符处理
- [ ] 输入包含特殊符号的文本（如：！？…—）
- [ ] 输入emoji表情符号
- [ ] 输入多语言混合文本（中英日混合）

---

## 📤 转换导出功能测试

### 1.4 引号样式配置

#### 1.4.1 预设引号选择
- [ ] 打开"处理选项"页面
- [ ] 查看预设引号列表（中文双引号、日文括号等）
- [ ] 勾选"中文双引号"（「」）
- [ ] 勾选"日文括号"（『』）
- [ ] 取消勾选某个引号选项
- [ ] 验证勾选状态保存到localStorage
- [ ] 刷新页面，验证勾选状态被保留

#### 1.4.2 自定义引号
- [ ] 在"自定义引号"输入框输入左引号（如：<）
- [ ] 在右引号输入框输入右引号（如：>）
- [ ] 点击"添加"按钮
- [ ] 验证自定义引号出现在列表中
- [ ] 验证自定义引号自动被勾选
- [ ] 添加多个自定义引号
- [ ] 删除某个自定义引号
- [ ] 验证自定义引号保存到localStorage

#### 1.4.3 引号样式预览
- [ ] 选择不同的引号组合
- [ ] 在"格式化文本"输入框输入测试文本
- [ ] 点击"格式化文本"按钮
- [ ] 验证文本被正确添加引号
- [ ] 验证多个引号组合都被应用

#### 1.4.4 引号边界测试
- [ ] 输入空的自定义引号（左右都为空）
- [ ] 验证显示错误提示
- [ ] 输入只有左引号没有右引号
- [ ] 验证显示错误提示
- [ ] 输入超长引号（如：10个字符）
- [ ] 验证正确处理或显示警告

### 1.5 旁白名称配置
- [ ] 在"旁白名称"输入框输入自定义名称（如："旁白"）
- [ ] 验证旁白名称被保存
- [ ] 清空旁白名称（留空）
- [ ] 验证使用默认值（单个空格）
- [ ] 输入特殊字符作为旁白名称
- [ ] 验证正确处理

### 1.6 文本转换功能

#### 1.6.1 基础转换
- [ ] 输入纯文本
- [ ] 点击"转换导出"按钮
- [ ] 验证显示"转换中..."加载状态
- [ ] 验证显示进度条
- [ ] 验证转换成功后显示JSON结果
- [ ] 验证JSON语法高亮显示
- [ ] 验证JSON格式正确（可以被解析）

#### 1.6.2 转换结果处理
- [ ] 转换成功后，验证JSON显示区域可滚动
- [ ] 点击"复制JSON"按钮
- [ ] 验证JSON被复制到剪贴板
- [ ] 验证显示"复制成功"提示
- [ ] 点击"下载JSON"按钮
- [ ] 验证下载JSON文件
- [ ] 打开下载的文件，验证内容正确

#### 1.6.3 转换使用项目文件
- [ ] 在编辑器中创建对话
- [ ] 不输入文本，直接点击"转换导出"
- [ ] 验证使用编辑器的项目文件进行转换
- [ ] 验证转换结果包含编辑器的所有卡片
- [ ] 验证布局动作被正确转换

#### 1.6.4 转换错误处理
- [ ] 在无网络状态下点击转换
- [ ] 验证显示错误提示
- [ ] 输入超大文本（10000+字）
- [ ] 点击转换，验证处理或显示限制提示
- [ ] 验证转换失败后按钮恢复正常状态

#### 1.6.5 引号应用验证
- [ ] 选择"中文双引号"（「」）
- [ ] 转换文本，验证对话被添加「」
- [ ] 选择多种引号
- [ ] 验证每个对话使用不同的引号样式
- [ ] 取消所有引号选择
- [ ] 验证对话没有引号

#### 1.6.6 旁白处理验证
- [ ] 设置旁白名称为"旁白"
- [ ] 转换包含旁白的文本
- [ ] 验证旁白的speaker为"旁白"
- [ ] 设置旁白名称为空
- [ ] 验证旁白的speaker为空格

### 1.7 JSON结果查看

#### 1.7.1 代码高亮
- [ ] 验证JSON关键字高亮（如：true, false, null）
- [ ] 验证字符串高亮（绿色/蓝色）
- [ ] 验证数字高亮
- [ ] 验证括号匹配高亮

#### 1.7.2 代码折叠
- [ ] 点击JSON对象前的折叠图标
- [ ] 验证对象内容折叠
- [ ] 点击展开，验证内容恢复
- [ ] 折叠大型数组
- [ ] 验证性能流畅

#### 1.7.3 代码搜索
- [ ] 使用Ctrl+F在JSON中搜索
- [ ] 验证搜索结果高亮
- [ ] 验证可以跳转到下一个/上一个匹配

---

## 📝 对话编辑器测试

### 2.1 基础操作
- [ ] 打开对话编辑器模态框
- [ ] 关闭对话编辑器模态框
- [ ] 拖拽时间轴卡片重新排序
- [ ] 双击角色名修改说话人
- [ ] 点击删除按钮删除对话卡片

### 2.0 多选模式与文本编辑模式 ⭐ 新增

#### 2.0.1 多选模式基础操作
- [ ] 点击"多选: 关"按钮，切换为"多选: 开"
- [ ] 验证多选模式状态保存到localStorage
- [ ] 刷新页面，验证多选模式状态被保留
- [ ] 点击"多选: 开"按钮，切换回"多选: 关"

#### 2.0.2 多选模式卡片选择
**多选模式开启时：**
- [ ] 点击卡片，验证卡片被选中（高亮显示）
- [ ] 再次点击已选中卡片，验证取消选中
- [ ] Ctrl+点击多个卡片，验证可以同时选中多个
- [ ] Shift+点击，验证范围选择（从上次选中到当前点击之间）
- [ ] 验证选中的卡片有视觉反馈（背景色/边框）

#### 2.0.3 多选模式批量操作
- [ ] 选中多个对话卡片
- [ ] 验证可以批量删除选中的卡片
- [ ] 选中多个卡片后拖拽，验证可以批量移动
- [ ] 切换多选模式时，验证选择被清空

#### 2.0.4 文本编辑模式基础操作
- [ ] 点击"编辑文本: 关"按钮，切换为"编辑文本: 开"
- [ ] 验证文本编辑模式状态保存到localStorage
- [ ] 刷新页面，验证文本编辑模式状态被保留
- [ ] 点击"编辑文本: 开"按钮，切换回"编辑文本: 关"

#### 2.0.5 文本编辑模式功能
**文本编辑模式关闭时：**
- [ ] 验证对话卡片没有"编辑文本"按钮
- [ ] 双击卡片修改角色名正常工作

**文本编辑模式开启时：**
- [ ] 验证每个对话卡片显示"编辑文本"按钮（笔图标）
- [ ] 点击"编辑文本"按钮
- [ ] 验证弹出文本编辑框/内联编辑器
- [ ] 修改对话文本内容
- [ ] 保存修改，验证卡片文本更新
- [ ] 取消修改，验证卡片文本不变

#### 2.0.6 文本编辑模式样式
- [ ] 验证编辑按钮样式清晰可见
- [ ] 验证鼠标悬停时有hover效果
- [ ] 验证文本编辑框/编辑器样式美观
- [ ] 验证长文本在编辑器中正确显示
- [ ] 验证多行文本编辑正常

#### 2.0.7 两种模式交互
- [ ] 同时开启多选模式和文本编辑模式
- [ ] 验证两种模式可以共存
- [ ] 在多选模式下点击"编辑文本"按钮
- [ ] 验证只编辑该卡片，不影响选择状态
- [ ] 关闭多选模式，验证文本编辑模式仍然工作
- [ ] 关闭文本编辑模式，验证多选模式仍然工作

### 2.2 对话卡片显示
- [ ] 验证对话卡片显示角色头像
- [ ] 验证旁白卡片显示 "N" 图标
- [ ] 验证卡片序号正确显示（#1, #2, #3...）
- [ ] 验证对话内容完整显示

### 2.3 角色选择
- [ ] 点击角色列表的角色头像
- [ ] 验证已使用角色有绿框显示
- [ ] 置顶/取消置顶角色，验证绿框保持显示
- [ ] 从角色列表拖拽角色到时间轴

### 2.4 布局卡片（在对话编辑器中）
- [ ] 创建登场布局卡片
- [ ] 创建退场布局卡片
- [ ] 创建移动布局卡片
- [ ] 验证布局卡片的类型、位置、偏移、服装显示正确

#### 2.4.1 布局卡片展开状态同步
- [ ] 在Live2D编辑器中展开登场布局卡片
- [ ] 切换到对话编辑器，验证该卡片保持展开状态
- [ ] 验证主位置标签显示"起点:"
- [ ] 验证第二位置行显示"终点:"
- [ ] 切换到动作/表情编辑器，验证展开状态同步

#### 2.4.2 布局卡片位置显示逻辑
- [ ] **未展开的登场卡片**：主位置显示 from 值
- [ ] **未展开的退场卡片**：主位置显示 from 值
- [ ] **未展开的移动卡片**：主位置显示 to 值（终点）
- [ ] **展开的所有类型卡片**：主位置显示 from 值（起点）

### 2.5 导入导出
- [ ] 点击"导入进度"按钮，导入JSON文件
- [ ] 验证导入后对话卡片正确显示
- [ ] 验证导入后已使用角色绿框正确显示
- [ ] 点击"导出进度"按钮，下载JSON文件
- [ ] 重新导入导出的文件，验证数据一致

### 2.6 撤销/恢复
- [ ] 执行一系列操作（添加、删除、修改）
- [ ] 点击"撤销"按钮（Ctrl+Z），验证撤销成功
- [ ] 点击"恢复"按钮（Ctrl+Y），验证恢复成功
- [ ] 验证撤销/恢复历史记录数量显示

---

## 📦 卡片分组功能测试

### 2.7 分组设置

#### 2.7.1 分组开关基础操作
- [ ] 打开"服装配置"页面
- [ ] 找到"启用编辑器卡片分组"复选框
- [ ] 勾选复选框，启用分组功能
- [ ] 验证设置被保存到localStorage
- [ ] 刷新页面，验证勾选状态被保留
- [ ] 取消勾选，验证设置被保存
- [ ] 验证存储失败时显示错误提示

### 2.8 对话编辑器分组功能

#### 2.8.1 分组模式基础显示
**测试前提**: 创建100+个对话卡片

**启用分组后：**
- [ ] 验证时间轴显示分组头部
- [ ] 验证每组默认显示50个卡片
- [ ] 验证分组头部显示格式："第 1-50 条"、"第 51-100 条"等
- [ ] 验证分组头部显示展开/折叠图标
- [ ] 验证默认只展开第一组

#### 2.8.2 分组展开/折叠操作
- [ ] 点击第一组头部，验证第一组折叠
- [ ] 验证折叠后只显示组头，卡片内容隐藏
- [ ] 点击第二组头部，验证第二组展开
- [ ] **验证同时只能展开一个组**（第一组自动折叠）
- [ ] 点击已展开的组头部，验证该组折叠
- [ ] 点击第三组头部，验证第三组展开
- [ ] 快速切换多个组，验证响应流畅

#### 2.8.3 分组内卡片操作
**在展开的组内：**
- [ ] 拖拽卡片重新排序（组内排序）
- [ ] 双击角色名修改说话人
- [ ] 点击删除按钮删除卡片
- [ ] 验证卡片序号正确更新
- [ ] 验证删除后组头显示的数量更新

**跨组拖拽：**
- [ ] 展开第一组，拖拽卡片到第一组末尾
- [ ] 展开第二组，尝试拖拽第一组的卡片到第二组
- [ ] 验证跨组拖拽行为（如果支持）
- [ ] 验证拖拽后分组边界自动调整

#### 2.8.4 分组边界情况
- [ ] 创建刚好50个卡片，验证显示1个组
- [ ] 创建51个卡片，验证显示2个组
- [ ] 创建99个卡片，验证第二组显示"第 51-99 条"
- [ ] 创建100个卡片，验证第二组显示"第 51-100 条"
- [ ] 创建200个卡片，验证显示4个组

#### 2.8.5 分组与搜索/筛选
- [ ] 启用分组后，使用搜索功能筛选卡片
- [ ] 验证搜索结果的分组显示
- [ ] 验证搜索后组头数量显示正确
- [ ] 清除搜索，验证恢复原分组

#### 2.8.6 分组性能测试
- [ ] 创建500个卡片，启用分组
- [ ] 验证页面加载流畅（< 1秒）
- [ ] 验证只渲染展开组的DOM元素
- [ ] 使用开发者工具检查DOM节点数量
- [ ] 验证折叠的组不渲染卡片DOM（性能优化）
- [ ] 快速切换组，验证渲染延迟 < 200ms

### 2.9 Live2D编辑器分组功能

#### 2.9.1 分组基础显示
**测试前提**: 创建100+个布局动作和对话

**启用分组后：**
- [ ] 验证时间轴显示分组头部
- [ ] 验证每组默认50个动作
- [ ] 验证分组头部格式正确
- [ ] 验证默认展开第一组

#### 2.9.2 混合卡片分组
- [ ] 创建混合卡片：对话 + 布局动作
- [ ] 验证分组按顺序包含所有类型卡片
- [ ] 验证组内可以包含对话卡片和布局卡片
- [ ] 验证分组头部显示总数正确

#### 2.9.3 分组内布局操作
**在展开的组内：**
- [ ] 修改布局类型（登场/退场/移动）
- [ ] 修改位置和偏移
- [ ] 展开/收起布局卡片的起终点配置
- [ ] 验证所有操作正常工作

#### 2.9.4 分组与快速布局
- [ ] 点击"快速布局"按钮
- [ ] 验证生成的布局动作正确分组
- [ ] 验证分组后位置循环（左内→中间→右内）仍然正确
- [ ] 验证快速布局后展开第一组

### 2.10 动作/表情编辑器分组功能

#### 2.10.1 分组基础显示
**测试前提**: 创建100+个动作

**启用分组后：**
- [ ] 验证时间轴显示分组头部
- [ ] 验证分组格式正确
- [ ] 验证动作/表情分配功能正常

#### 2.10.2 分组内表情操作
**在展开的组内：**
- [ ] 点击卡片的"设置动作/表情"按钮
- [ ] 拖拽动作/表情到分配区域
- [ ] 修改延迟时间
- [ ] 验证所有操作正常工作

#### 2.10.3 分组与布局卡片
- [ ] 验证布局卡片在分组中正常显示
- [ ] 验证布局卡片的展开状态在分组中保持
- [ ] 验证可以为布局卡片设置初始动作/表情

### 2.11 分组模式切换测试

#### 2.11.1 启用分组
**测试场景**: 已有100个卡片，当前未启用分组

- [ ] 打开对话编辑器，验证显示所有卡片（滚动条很长）
- [ ] 勾选"启用编辑器卡片分组"
- [ ] **不刷新页面**，再次打开对话编辑器
- [ ] 验证自动切换为分组显示
- [ ] 验证第一组展开，其他组折叠

#### 2.11.2 禁用分组
**测试场景**: 已启用分组，有100个卡片

- [ ] 打开对话编辑器，验证显示分组
- [ ] 取消勾选"启用编辑器卡片分组"
- [ ] **不刷新页面**，再次打开对话编辑器
- [ ] 验证切换为普通列表显示（无分组）
- [ ] 验证所有卡片都可见，有滚动条
- [ ] 验证卡片操作正常

#### 2.11.3 跨编辑器分组状态
- [ ] 在对话编辑器中启用分组
- [ ] 切换到Live2D编辑器
- [ ] 验证Live2D编辑器也使用分组显示
- [ ] 切换到动作/表情编辑器
- [ ] 验证动作/表情编辑器也使用分组显示
- [ ] 在动作/表情编辑器禁用分组
- [ ] 返回对话编辑器，验证分组被禁用

### 2.12 分组与其他功能交互测试

#### 2.12.1 分组与导入导出
- [ ] 启用分组，创建100个卡片
- [ ] 展开第3组
- [ ] 导出进度为JSON
- [ ] 刷新页面，导入进度
- [ ] **验证导入后恢复分组显示**
- [ ] **验证默认展开第一组**（不记住上次展开的组）

#### 2.12.2 分组与撤销/恢复
- [ ] 启用分组，展开第2组
- [ ] 在第2组内删除一个卡片
- [ ] 点击撤销
- [ ] 验证卡片恢复
- [ ] 验证仍在第2组内
- [ ] 验证组头数量更新

#### 2.12.3 分组与卡片筛选
- [ ] 启用分组，创建多个角色的对话
- [ ] 点击角色列表筛选某个角色
- [ ] 验证只显示该角色的卡片
- [ ] 验证分组头部数量更新
- [ ] 验证筛选后可能只显示部分组
- [ ] 取消筛选，验证恢复所有分组

#### 2.12.4 分组与布局卡片展开状态
- [ ] 启用分组，创建多个布局卡片分布在不同组
- [ ] 展开第1组，展开一个布局卡片的起终点配置
- [ ] 折叠第1组，展开第2组
- [ ] 在第2组展开另一个布局卡片
- [ ] 返回第1组
- [ ] **验证第1组布局卡片的展开状态被保留**
- [ ] 切换到Live2D编辑器
- [ ] **验证所有布局卡片展开状态正确同步**

### 2.13 分组极限测试

#### 2.13.1 大量卡片测试
- [ ] 创建1000个卡片
- [ ] 启用分组，验证显示20个组
- [ ] 验证页面加载时间 < 2秒
- [ ] 快速切换第1组、第10组、第20组
- [ ] 验证切换流畅，无明显卡顿

#### 2.13.2 小量卡片测试
- [ ] 创建10个卡片（少于分组阈值50）
- [ ] 启用分组
- [ ] 验证只显示1个组，包含所有10个卡片
- [ ] 验证该组默认展开
- [ ] 验证操作与不分组时一致

#### 2.13.3 动态增删卡片
- [ ] 启用分组，创建60个卡片（2个组）
- [ ] 展开第2组
- [ ] 在第2组末尾添加新卡片（通过拖拽角色）
- [ ] 验证新卡片出现在第2组
- [ ] 继续添加到第61个卡片
- [ ] **验证自动创建第3组**
- [ ] 验证第3组包含第51-61个卡片
- [ ] 删除卡片直到只剩50个
- [ ] **验证第2组消失**

#### 2.13.4 分组与实时编辑
- [ ] 启用分组，展开第1组
- [ ] 快速连续修改多个卡片的内容
- [ ] 验证修改实时保存
- [ ] 验证UI不会闪烁或重新渲染整个组
- [ ] 验证组头数量保持准确

### 2.14 分组UI/UX测试

#### 2.14.1 分组头部样式
- [ ] 验证分组头部有明显的视觉区分
- [ ] 验证展开/折叠图标清晰可见
- [ ] 验证鼠标悬停时有高亮效果
- [ ] 验证展开的组头部样式与折叠的不同
- [ ] 验证暗色/浅色主题下都显示正常

#### 2.14.2 分组动画效果
- [ ] 点击组头部展开，验证有平滑的展开动画
- [ ] 点击组头部折叠，验证有平滑的折叠动画
- [ ] 验证动画时长适中（约200-300ms）
- [ ] 验证动画不会影响性能

#### 2.14.3 分组滚动行为
- [ ] 展开第10组（在页面下方）
- [ ] 验证页面自动滚动到该组顶部
- [ ] 展开第1组
- [ ] 验证页面滚动到顶部
- [ ] 验证滚动平滑，无跳跃

#### 2.14.4 分组无障碍性
- [ ] 使用键盘Tab键遍历组头部
- [ ] 使用Enter/Space键展开/折叠组
- [ ] 验证屏幕阅读器能正确读取组信息
- [ ] 验证分组不影响键盘快捷键（Ctrl+Z等）

---

## 🎭 动作/表情编辑器测试

### 3.1 基础操作
- [ ] 打开动作/表情编辑器模态框
- [ ] 关闭模态框
- [ ] 切换到不同的对话卡片，验证内容更新

### 3.2 动作/表情分配
- [ ] 点击对话卡片的"设置动作/表情"按钮
- [ ] 从动作列表拖拽动作到分配区域
- [ ] 从表情列表拖拽表情到分配区域
- [ ] 验证角色选择器显示正确角色
- [ ] 修改延迟时间，验证保存

### 3.3 布局卡片的动作/表情
- [ ] 点击布局卡片的"设置动作/表情"按钮
- [ ] 验证只显示该布局涉及的角色
- [ ] 分配初始动作
- [ ] 分配初始表情
- [ ] 验证 initialState 正确保存

### 3.4 布局卡片展开状态（在动作/表情编辑器中）
- [ ] 验证未展开的登场卡片：标签显示"位置:"和"偏移:"
- [ ] 验证未展开的移动卡片：主位置显示终点值
- [ ] 验证展开的登场卡片：标签显示"起点:"和"起偏移:"，显示第二位置行
- [ ] 验证展开的移动卡片：主位置显示起点值，第二位置行显示终点值
- [ ] 验证切换按钮被隐藏（只在Live2D编辑器显示）

### 3.5 动作/表情删除
- [ ] 点击分配项的删除按钮
- [ ] 验证分配被移除
- [ ] 验证数据正确更新

### 3.6 恢复默认
- [ ] 点击"恢复默认"按钮
- [ ] 验证所有动作/表情被清空
- [ ] 验证布局卡片的 initialState 被清空

### 3.7 跳转Live2D浏览器
- [ ] 点击"跳转Live2D浏览器"按钮
- [ ] 验证新标签页打开，显示服装ID
- [ ] 验证无服装时跳转到首页

---

## 🎨 Live2D 布局编辑器测试

### 4.1 基础操作
- [ ] 打开Live2D布局编辑器模态框
- [ ] 关闭模态框
- [ ] 从角色列表拖拽角色到时间轴
- [ ] 拖拽时间轴卡片重新排序

### 4.2 布局卡片创建
- [ ] 拖拽角色到时间轴，第一次创建登场卡片
- [ ] 再次拖拽同一角色，验证创建移动/退场卡片（根据设置）
- [ ] 切换"后续布局模式"，验证创建类型变化

### 4.3 布局卡片属性编辑
- [ ] 修改布局类型（登场/退场/移动）
- [ ] 修改位置（左外/左内/中间/右内/右外）
- [ ] 修改偏移值
- [ ] 修改服装
- [ ] 验证所有修改实时保存

### 4.4 布局卡片展开/收起功能 ⭐ 核心测试

#### 4.4.1 登场布局卡片
**未展开状态：**
- [ ] 验证只显示一行位置配置
- [ ] 验证标签显示"位置:"和"偏移:"
- [ ] 验证切换按钮显示"+"图标
- [ ] 修改位置，验证 from 和 to 同时更新

**点击展开按钮后：**
- [ ] 验证按钮图标旋转45度变成"×"
- [ ] 验证第一行标签变为"起点:"和"起偏移:"
- [ ] 验证第二行显示"终点:"和"终偏移:"
- [ ] 验证第二行位置初始值等于第一行
- [ ] 修改起点位置，验证只更新 from
- [ ] 修改终点位置，验证只更新 to
- [ ] 验证起点和终点可以独立配置

**再次点击收起按钮：**
- [ ] 验证第二行隐藏
- [ ] 验证标签恢复为"位置:"和"偏移:"
- [ ] 验证按钮图标恢复为"+"
- [ ] 验证终点位置被设置为与起点相同
- [ ] 修改位置，验证 from 和 to 再次同步更新

#### 4.4.2 退场布局卡片
**未展开状态：**
- [ ] 验证只显示一行位置配置
- [ ] 验证标签显示"位置:"和"偏移:"
- [ ] 修改位置，验证 from 和 to 同时更新

**展开状态：**
- [ ] 验证第一行标签变为"起点:"和"起偏移:"
- [ ] 验证第二行显示"终点:"和"终偏移:"
- [ ] 修改起点和终点，验证独立更新

#### 4.4.3 移动布局卡片 ⭐ 特殊逻辑
**未展开状态：**
- [ ] 验证只显示一行位置配置
- [ ] 验证标签显示"位置:"和"偏移:"
- [ ] **验证主位置显示的是终点值（to）而不是起点值**
- [ ] 修改位置，验证只更新 to（终点），from（起点）保持不变
- [ ] 验证起点自动设置为前一个动作的终点位置

**展开状态：**
- [ ] 验证第一行标签变为"起点:"和"起偏移:"
- [ ] **验证第一行显示的是起点值（from）**
- [ ] 验证第二行显示"终点:"和"终偏移:"
- [ ] 修改第一行（起点），验证可以独立调整
- [ ] 修改第二行（终点），验证可以独立调整
- [ ] **验证调整终点时，起点不会同步改变**

### 4.5 快速布局功能
- [ ] 点击"快速布局"按钮
- [ ] 确认弹窗，验证自动生成登场动作
- [ ] 验证角色位置按顺序循环：左内 → 中间 → 右内
- [ ] 验证第1个角色在左内
- [ ] 验证第2个角色在中间
- [ ] 验证第3个角色在右内
- [ ] 验证第4个角色在左内（循环）

### 4.6 清空布局
- [ ] 点击"清空布局"按钮
- [ ] 确认弹窗
- [ ] 验证所有布局动作被清空
- [ ] 验证对话动作保留

### 4.7 导入导出
- [ ] 导入包含布局动作的JSON文件
- [ ] 验证布局卡片正确显示
- [ ] 验证展开状态正确恢复
- [ ] 导出并重新导入，验证数据一致

### 4.8 对话卡片（在Live2D编辑器中）
- [ ] 验证对话卡片正常显示
- [ ] 验证对话卡片文字不会垂直排列（min-width: 200px）
- [ ] 验证对话卡片的footer被隐藏

---

## ⚙️ 配置管理测试

### 5.1 角色配置
- [ ] 打开配置管理页面
- [ ] 添加新角色：输入角色名和ID
- [ ] 验证角色被添加到列表
- [ ] 点击添加更多ID，为角色添加多个ID
- [ ] 删除角色的某个ID
- [ ] 删除整个角色
- [ ] 置顶/取消置顶角色

### 5.2 角色头像显示
- [ ] 验证有效ID的角色显示头像
- [ ] 验证无效ID的角色显示首字母
- [ ] 验证自定义角色（ID 10000+）头像处理

### 5.3 角色配置保存
- [ ] 修改角色配置
- [ ] 点击"保存配置"按钮
- [ ] 刷新页面，验证配置被保存
- [ ] 在对话编辑器中验证配置生效

### 5.4 角色配置导入导出
- [ ] 点击"导出配置"，下载JSON文件
- [ ] 清空配置
- [ ] 点击"导入配置"，导入之前导出的文件
- [ ] 验证配置完全恢复

### 5.5 重置为默认
- [ ] 修改配置
- [ ] 点击"重置为默认"按钮
- [ ] 确认弹窗
- [ ] 验证配置恢复为默认值

---

## 🎭 服装配置测试

### 6.1 服装列表管理
- [ ] 打开服装配置页面
- [ ] 选择一个角色
- [ ] 查看该角色的服装列表
- [ ] 添加新服装ID
- [ ] 删除服装ID

### 6.2 自定义服装
- [ ] 为自定义角色（ID 10000+）添加服装
- [ ] 验证自定义服装保存成功
- [ ] 在布局编辑器中选择自定义服装

### 6.3 服装配置继承
- [ ] 添加一个新角色（ID：338），名为 Mortis
- [ ] 验证该角色不会自动继承同ID的其他角色服装
- [ ] 验证每个角色的服装配置独立

---

## 📍 位置配置测试

### 7.1 自动位置模式
- [ ] 勾选"自动分配位置"
- [ ] 使用快速布局
- [ ] 验证角色位置按顺序自动分配：左内 → 中间 → 右内（循环）

### 7.2 手动位置模式
- [ ] 取消勾选"自动分配位置"
- [ ] 为每个角色手动设置位置和偏移
- [ ] 点击"保存位置配置"
- [ ] 使用快速布局，验证使用手动设置的位置

### 7.3 位置重置
- [ ] 点击"重置位置"按钮
- [ ] 确认弹窗
- [ ] 验证所有角色位置恢复为中间，偏移清零

---

## 🎬 动作/表情配置测试

### 8.1 查看默认动作/表情
- [ ] 打开动作/表情配置页面
- [ ] 查看动作列表，验证显示所有bestdori默认动作
- [ ] 查看表情列表，验证显示所有bestdori默认表情

### 8.2 添加自定义动作/表情
- [ ] 在"添加自定义动作"输入框输入动作ID
- [ ] 点击添加按钮
- [ ] 验证动作被添加到列表，标记为"自定义"
- [ ] 添加自定义表情
- [ ] 验证表情被添加到列表

### 8.3 删除自定义动作/表情
- [ ] 点击自定义项的删除按钮
- [ ] 验证项目被删除
- [ ] 验证默认项没有删除按钮

### 8.4 保存和恢复
- [ ] 添加多个自定义动作/表情
- [ ] 点击"保存配置"
- [ ] 刷新页面，验证自定义项被保存
- [ ] 在动作/表情编辑器中验证可以使用自定义项

### 8.5 重置配置
- [ ] 点击"重置配置"按钮
- [ ] 确认弹窗
- [ ] 验证所有自定义项被清空

---

## 🔄 编辑器间状态同步测试 ⭐ 重点

### 9.1 布局卡片展开状态三编辑器同步

#### 测试场景1：Live2D → 对话编辑器
- [ ] 在Live2D编辑器中创建登场布局卡片
- [ ] 点击"+"按钮展开卡片
- [ ] 切换到对话编辑器
- [ ] **验证布局卡片保持展开状态**
- [ ] **验证标签显示"起点:"和"起偏移:"**
- [ ] **验证第二位置行显示"终点:"**
- [ ] **验证没有切换按钮（被隐藏）**

#### 测试场景2：Live2D → 动作/表情编辑器
- [ ] 在Live2D编辑器中展开移动布局卡片
- [ ] 切换到动作/表情编辑器
- [ ] **验证卡片保持展开状态**
- [ ] **验证主位置（第一行）显示起点值（from）**
- [ ] **验证第二行显示终点值（to）**

#### 测试场景3：三编辑器循环切换
- [ ] 在Live2D编辑器展开退场卡片
- [ ] 切换到对话编辑器，验证展开
- [ ] 切换到动作/表情编辑器，验证展开
- [ ] 再切换回Live2D编辑器，验证展开状态保持

#### 测试场景4：展开后修改位置
- [ ] 在Live2D编辑器展开移动卡片
- [ ] 修改起点为"左内"，终点为"右外"
- [ ] 切换到对话编辑器
- [ ] **验证起点显示"左内"**
- [ ] **验证终点显示"右外"**
- [ ] 切换到动作/表情编辑器
- [ ] **验证位置值完全一致**

### 9.2 未展开状态同步

#### 测试场景5：收起状态同步
- [ ] 在Live2D编辑器创建并展开登场卡片
- [ ] 点击"×"按钮收起
- [ ] 切换到对话编辑器
- [ ] **验证卡片处于收起状态**
- [ ] **验证只显示一行位置配置**
- [ ] **验证标签显示"位置:"和"偏移:"**

#### 测试场景6：移动卡片未展开状态
- [ ] 在Live2D编辑器创建移动卡片（不展开）
- [ ] 设置终点为"右内"
- [ ] 切换到对话编辑器
- [ ] **验证主位置显示"右内"（终点值）**
- [ ] 切换到动作/表情编辑器
- [ ] **验证主位置显示"右内"（终点值）**

### 9.3 导入导出状态保持
- [ ] 展开多个布局卡片
- [ ] 导出进度为JSON文件
- [ ] 刷新页面（清空状态）
- [ ] 导入刚才导出的JSON
- [ ] 在Live2D编辑器验证展开状态恢复
- [ ] 切换到对话编辑器验证展开状态同步
- [ ] 切换到动作/表情编辑器验证展开状态同步

---

## 🎯 边界情况测试

### 10.1 空数据处理
- [ ] 不输入任何文本，点击编辑器
- [ ] 验证编辑器正常打开，显示空列表
- [ ] 导入空JSON文件
- [ ] 验证不报错，显示空状态

### 10.2 大量数据处理
- [ ] 输入100+行对话
- [ ] 验证解析正常
- [ ] 验证时间轴滚动流畅
- [ ] 验证拖拽排序正常

### 10.3 特殊角色名处理
- [ ] 使用超长角色名（50个字符）
- [ ] 使用包含特殊符号的角色名（如：角色_test、角色-1）
- [ ] 使用纯数字角色名
- [ ] 使用emoji作为角色名

### 10.4 异常ID处理
- [ ] 输入不存在的角色ID（如：999999）
- [ ] 验证显示"未知角色 (ID: 999999)"
- [ ] 输入负数ID
- [ ] 输入非数字ID

### 10.5 布局卡片边界测试
- [ ] 创建100+个布局卡片
- [ ] 频繁展开/收起布局卡片
- [ ] 快速切换编辑器
- [ ] 验证不会出现状态不同步

---

## 🐛 Bug 修复验证

### 11.1 已修复的问题验证
- [ ] **服装配置bug**: 验证 Mortis (ID:338) 不会继承若叶睦的服装
- [ ] **位置循环bug**: 验证快速布局使用左内→中间→右内循环（不是左外开始）
- [ ] **导入导出bug**: 验证点击导入/导出按钮有反应
- [ ] **绿框消失bug**: 验证置顶/取消置顶后已使用角色绿框保持显示
- [ ] **导入进度绿框bug**: 验证导入进度后已使用角色绿框正确显示
- [ ] **Live2D对话卡片头像bug**: 验证对话卡片正确识别角色名字显示头像
- [ ] **展开按钮样式bug**: 验证切换按钮样式与"设置动作/表情"按钮一致
- [ ] **移动卡片展开bug**: 验证展开后起点位置可以调整，终点调整不会导致起点同步
- [ ] **标签文字bug**: 验证展开时显示"起偏移:"而不是"偏移:"

### 11.2 代码重构验证
- [ ] 验证三个编辑器的布局卡片渲染逻辑一致
- [ ] 验证没有控制台报错（404 editorService.js）
- [ ] 验证共享渲染函数工作正常

---

## 🔍 性能测试

### 12.1 加载性能
- [ ] 清除缓存，刷新页面
- [ ] 验证页面加载时间 < 3秒
- [ ] 验证无资源加载失败（控制台无404错误）

### 12.2 操作响应性
- [ ] 拖拽卡片响应时间 < 100ms
- [ ] 切换编辑器响应时间 < 500ms
- [ ] 输入文本解析响应时间 < 200ms
- [ ] 展开/收起布局卡片响应时间 < 100ms

### 12.3 内存使用
- [ ] 打开所有编辑器，检查内存使用
- [ ] 执行100次操作，检查内存是否增长
- [ ] 关闭编辑器，检查内存是否释放

---

## 🌐 浏览器兼容性测试

### 13.1 Chrome/Edge
- [ ] 所有功能正常
- [ ] UI显示正确
- [ ] 拖拽功能正常

### 13.2 Firefox
- [ ] 所有功能正常
- [ ] UI显示正确
- [ ] 拖拽功能正常

### 13.3 Safari（如果可用）
- [ ] 所有功能正常
- [ ] UI显示正确
- [ ] 拖拽功能正常

---

## 📱 响应式设计测试

### 14.1 不同屏幕尺寸
- [ ] 1920x1080（全高清）
- [ ] 1366x768（笔记本）
- [ ] 1280x720（小屏幕）
- [ ] 验证模态框适配
- [ ] 验证卡片布局适配

### 14.2 缩放测试
- [ ] 浏览器缩放至50%
- [ ] 浏览器缩放至150%
- [ ] 验证UI不会错位

---

## 📊 数据完整性测试

### 15.1 数据保存
- [ ] 执行一系列复杂操作
- [ ] 导出JSON文件
- [ ] 检查JSON结构正确
- [ ] 验证所有字段都被保存

### 15.2 数据恢复
- [ ] 关闭浏览器标签页
- [ ] 重新打开
- [ ] 验证上次的配置被恢复
- [ ] 验证localStorage数据正确

### 15.3 数据迁移
- [ ] 导出旧版本数据（如果有）
- [ ] 导入到当前版本
- [ ] 验证数据兼容性
- [ ] 验证无数据丢失

---

## 🎨 UI与主题测试

### 16.1 主题切换功能

#### 16.1.1 主题选择器基础操作
- [ ] 点击右上角主题选择器
- [ ] 选择"浅色"主题
- [ ] 验证页面立即切换为浅色主题
- [ ] 验证主题选择保存到localStorage
- [ ] 刷新页面，验证主题被保留
- [ ] 选择"深色"主题
- [ ] 验证页面立即切换为深色主题

#### 16.1.2 主题样式验证 - 浅色主题
- [ ] 验证背景色为浅色
- [ ] 验证文字颜色为深色（可读性好）
- [ ] 验证卡片背景为白色/浅灰色
- [ ] 验证按钮颜色清晰
- [ ] 验证输入框边框可见
- [ ] 验证链接颜色适中

#### 16.1.3 主题样式验证 - 深色主题
- [ ] 验证背景色为深色
- [ ] 验证文字颜色为浅色（可读性好）
- [ ] 验证卡片背景为深灰色
- [ ] 验证按钮颜色清晰
- [ ] 验证输入框边框可见
- [ ] 验证链接颜色适中
- [ ] 验证没有过亮的元素刺眼

#### 16.1.4 主题切换无闪烁
- [ ] 刷新页面，验证主题立即应用（无闪烁）
- [ ] 验证页面加载时使用正确的主题
- [ ] 切换主题，验证过渡平滑
- [ ] 验证所有组件都响应主题切换

#### 16.1.5 主题在不同页面
- [ ] 在"输入文本"页面切换主题
- [ ] 切换到"编辑器"页面，验证主题一致
- [ ] 切换到"处理选项"页面，验证主题一致
- [ ] 打开模态框，验证模态框主题正确
- [ ] 在模态框内切换主题，验证整体切换

### 16.2 导航功能

#### 16.2.1 侧边栏导航
- [ ] 验证侧边栏显示4个步骤
- [ ] 验证当前步骤高亮显示
- [ ] 点击"1. 输入文本"，验证跳转到对应页面
- [ ] 点击"2. 编辑器"，验证跳转到编辑器
- [ ] 点击"3. 处理选项"，验证跳转到处理选项
- [ ] 点击"4. 转换导出"，验证跳转到转换页面
- [ ] 验证步骤之间切换平滑

#### 16.2.2 配置选项导航
- [ ] 验证侧边栏显示配置部分
- [ ] 点击"配置管理"，验证跳转
- [ ] 点击"服装配置"，验证跳转
- [ ] 点击"位置配置"，验证跳转
- [ ] 点击"动作/表情"，验证跳转
- [ ] 验证当前配置页高亮

#### 16.2.3 导航状态记忆
- [ ] 切换到某个页面（如：处理选项）
- [ ] 刷新浏览器
- [ ] 验证停留在刷新前的页面
- [ ] 验证导航高亮正确

#### 16.2.4 快捷导航
- [ ] 使用键盘方向键切换步骤
- [ ] 使用数字键1-4快速跳转步骤
- [ ] 验证快捷键在编辑器中不冲突

### 16.3 帮助与关闭功能

#### 16.3.1 帮助按钮
- [ ] 点击右上角"?"帮助按钮
- [ ] 验证弹出使用说明对话框/页面
- [ ] 查看帮助内容，验证信息完整
- [ ] 关闭帮助，验证正常返回
- [ ] 在不同页面点击帮助，验证都能打开

#### 16.3.2 关闭程序按钮
- [ ] 点击右上角红色"关闭程序"按钮
- [ ] 验证弹出确认对话框
- [ ] 点击"取消"，验证不关闭
- [ ] 再次点击关闭按钮
- [ ] 点击"确定"，验证程序关闭/服务器停止

#### 16.3.3 关闭前保存提示
- [ ] 编辑对话但未保存
- [ ] 点击关闭程序
- [ ] 验证提示"有未保存的更改"
- [ ] 点击"保存并关闭"
- [ ] 验证数据被保存

### 16.4 状态提示系统

#### 16.4.1 成功提示
- [ ] 执行成功操作（如：保存配置）
- [ ] 验证显示绿色成功提示
- [ ] 验证提示自动消失（2-3秒）
- [ ] 验证提示位置合适（不遮挡内容）

#### 16.4.2 错误提示
- [ ] 执行失败操作（如：网络错误）
- [ ] 验证显示红色错误提示
- [ ] 验证错误信息描述清楚
- [ ] 验证提示停留时间较长（5秒）

#### 16.4.3 警告提示
- [ ] 触发警告（如：数据即将被覆盖）
- [ ] 验证显示黄色警告提示
- [ ] 验证警告信息明确

#### 16.4.4 信息提示
- [ ] 触发普通信息（如：正在加载）
- [ ] 验证显示蓝色信息提示
- [ ] 验证提示样式柔和

#### 16.4.5 多条提示
- [ ] 快速触发多个操作
- [ ] 验证多条提示不重叠
- [ ] 验证提示按顺序显示
- [ ] 验证旧提示自动消失

### 16.5 进度条系统

#### 16.5.1 进度条显示
- [ ] 执行耗时操作（如：转换文本）
- [ ] 验证显示进度条
- [ ] 验证进度条有动画效果
- [ ] 验证进度百分比更新

#### 16.5.2 进度条完成
- [ ] 操作完成时
- [ ] 验证进度条到达100%
- [ ] 验证进度条自动消失
- [ ] 验证显示成功提示

#### 16.5.3 进度条错误
- [ ] 操作失败时
- [ ] 验证进度条停止
- [ ] 验证显示错误提示
- [ ] 验证进度条消失

### 16.6 加载状态

#### 16.6.1 按钮加载状态
- [ ] 点击"保存配置"按钮
- [ ] 验证按钮变为"保存中..."
- [ ] 验证按钮禁用（不可再次点击）
- [ ] 验证按钮有加载动画
- [ ] 操作完成后按钮恢复

#### 16.6.2 页面加载状态
- [ ] 打开编辑器
- [ ] 验证显示加载遮罩
- [ ] 验证加载动画清晰
- [ ] 加载完成后遮罩消失

### 16.7 响应式交互

#### 16.7.1 鼠标悬停效果
- [ ] 鼠标悬停在按钮上
- [ ] 验证按钮有hover效果（颜色变化）
- [ ] 鼠标悬停在卡片上
- [ ] 验证卡片有高亮效果
- [ ] 鼠标悬停在链接上
- [ ] 验证链接下划线/颜色变化

#### 16.7.2 点击反馈
- [ ] 点击按钮
- [ ] 验证按钮有按下效果（active状态）
- [ ] 点击卡片
- [ ] 验证卡片有点击反馈
- [ ] 验证触觉反馈清晰

#### 16.7.3 禁用状态
- [ ] 验证禁用按钮样式（灰色/不可点击）
- [ ] 尝试点击禁用按钮，验证无响应
- [ ] 验证禁用输入框无法编辑
- [ ] 验证禁用元素有cursor: not-allowed

---

## ✅ 测试总结

### 测试通过率计算
- 总测试项: ___
- 通过项: ___
- 失败项: ___
- 通过率: ___%

### 发现的问题列表
1. ___
2. ___
3. ___

### 需要改进的功能
1. ___
2. ___
3. ___

### 测试结论
- [ ] 所有核心功能正常
- [ ] 所有已知bug已修复
- [ ] 代码重构未引入新问题
- [ ] 可以发布使用

---

## 🎯 测试建议

### 推荐测试顺序
1. **第一轮**: 文本输入与解析（1.1-1.3节）
2. **第二轮**: 转换导出功能（1.4-1.7节）⭐ 核心流程
3. **第三轮**: 对话编辑器基础功能（2.1-2.6节）
4. **第四轮**: 多选与文本编辑模式（2.0节）⭐ 新增重点
5. **第五轮**: 卡片分组功能（2.7-2.14节）⭐ 性能优化
6. **第六轮**: 动作/表情和Live2D编辑器（第3-4章节）
7. **第七轮**: 编辑器同步测试（第9章节）⭐ 核心重点
8. **第八轮**: 配置管理测试（5-8章节）
9. **第九轮**: UI与主题测试（第16章节）⭐ 用户体验
10. **第十轮**: Bug修复验证（第11章节）
11. **第十一轮**: 边界和性能测试（10、12章节）
12. **第十二轮**: 兼容性测试（13-15章节）

### 测试注意事项
1. 每次测试前清除浏览器缓存（Ctrl+Shift+Delete）
2. 打开开发者工具控制台（F12）监控错误信息和网络请求
3. 记录每个失败的测试用例，包含详细复现步骤
4. 截图或录屏保存异常情况（推荐使用Snipaste/OBS）
5. 测试时模拟真实使用场景和用户行为
6. 卡片分组测试需要创建大量数据（100+卡片）
7. 性能测试使用开发者工具Performance和Memory面板
8. 多选模式和文本编辑模式需要交叉测试
9. 主题切换测试需要在深色和浅色模式下都验证

### 高优先级测试项 ⭐
#### 核心功能（必测）
- **转换导出功能**（1.4-1.7节）⭐⭐⭐ 最核心
  - 引号样式应用（1.6.5节）
  - 转换结果正确性（1.6.1-1.6.3节）
  - 错误处理（1.6.4节）
- **多选模式与文本编辑模式**（2.0节）⭐⭐ 新增核心功能
  - 多选卡片选择（2.0.2节）
  - 批量操作（2.0.3节）
  - 文本编辑功能（2.0.5节）
- **布局卡片三编辑器展开状态同步**（第9章节）⭐⭐⭐ 核心重点
  - 跨编辑器状态同步（9.1-9.2节）
  - 移动卡片特殊逻辑（4.4.3节）
- **卡片分组功能**（2.7-2.14节）⭐⭐ 性能优化
  - 分组展开/折叠（2.8.2节）
  - 分组性能（2.8.6节，2.13.1节）
  - 分组与布局卡片展开状态（2.12.4节）

#### 用户体验（重要）
- **主题切换**（16.1节）⭐ 视觉体验
- **导航功能**（16.2节）⭐ 操作流程
- **状态提示系统**（16.4节）⭐ 用户反馈

#### 已修复问题（验证）
- **快速布局位置循环**（4.5节）
- **editorService.js 404问题**（11.2节）
- **代码重构验证**（11.2节）
- **所有历史bug**（11.1节）

### 卡片分组功能测试要点 🆕
卡片分组是一个**性能优化和UX增强功能**，测试时需要特别关注：

1. **性能验证**：
   - 验证大量卡片（500+）时页面不卡顿
   - 验证折叠的组不渲染DOM（减少内存占用）
   - 验证切换组时响应迅速（< 200ms）

2. **交互验证**：
   - 验证同时只能展开一个组（手风琴效果）
   - 验证分组与卡片编辑功能不冲突
   - 验证分组与拖拽排序兼容

3. **状态同步**：
   - 验证三个编辑器共享分组设置
   - 验证分组状态正确保存和恢复
   - 验证布局卡片展开状态在分组中保持

4. **边界情况**：
   - 测试卡片数量少于50（不分组）
   - 测试卡片数量刚好50、51（临界值）
   - 测试动态增删卡片时分组自动调整
